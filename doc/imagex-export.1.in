.TH IMAGEX "1" "October 2012" "imagex (wimlib) wimlib @VERSION@" "User Commands"
.SH NAME
imagex-export \- Exports an image from a WIM archive to an existing or new WIM archive

.SH SYNOPSIS
\fBimagex export\fR \fISRC_WIMFILE\fR (\fISRC_IMAGE_NUM\fR | \
\fISRC_IMAGE_NAME\fR | all ) \fIDEST_WIMFILE\fR [\fIDEST_IMAGE_NAME\fR\] \
[\fIDEST_IMAGE_DESCRIPTION\fR] [\fIOPTION\fR]...

.SH DESCRIPTION
.PP

Copies the specified image in \fISRC_WIMFILE\fR to \fIDEST_WIMFILE\fR,
optionally changing its name and/or description and/or compression type.
If \fIDEST_WIMFILE\fR exists, it is taken be be a WIM archive to which the image
will be appended.  Otherwise, it is created as a new WIM archive containing only
the exported image.

The source image may be specified by \fISRC_IMAGE_NUM\fR, which must be an integer that is
an index of an image in \fISRC_WIMFILE\fR, starting at 1.  Alternatively, it may be
the name of an image in \fISRC_WIMFILE\fR, or it may be the keyword "all" to
specify that all images are to be exported.

If given, \fIDEST_IMAGE_NAME\fR specifies the name to give the image being
exported to \fIDEST_WIMFILE\fR.  The default is its name in \fISRC_WIMFILE\fR.
\fIDEST_IMAGE_NAME\fR cannot be specified if multiple images are being exported.

If given, \fIDEST_IMAGE_DESCRIPTION\fR specifies the description to give the
image being exported to \fIDEST_WIMFILE\fR.  The default is its description in
\fISRC_WIMFILE\fR.

\fBimagex export\fR supports exporting images from stand-alone WIMs as well as
from split WIMs.  However, you cannot export an image to a split WIM.  See
\fBSPLIT WIMS\fR.

.SH OPTIONS
.TP 6
\fB--boot\fR
Specifies that the exported image is to be the bootable image of the destination
WIM archive.

If multiple images are being exported, this flag indicates that the image in the
\fISRC_WIMFILE\fR that is currently marked as bootable is to be made bootable in
\fIDEST_WIMFILE\fR.  If no image in \fISRC_WIMFILE\fR is bootable, it is an
error.
.TP
\fB--check\fR
When reading \fISRC_WIMFILE\fR, verify its integrity if the integrity table is
present; additionally, when writing \fIDEST_WIMFILE\fR with the new image added,
write an integrity table.  If this option is not specified, no integrity table
is included in \fIDEST_WIMFILE\fR, even if there was one before.
.TP
\fB--compress\fR=\fITYPE\fR
Specifies the compression type for \fIDEST_WIMFILE\fR.  This is only valid if
\fIDEST_WIMFILE\fR does not yet exist, since if \fIDEST_WIMFILE\fR exists, the
compression type must be the same as that of \fIDEST_WIMFILE\fR.

\fITYPE\fR may be "none", "maximum", or "fast".  By default, it is the same as
that of the input WIM file.

You may also specify the actual names of the compression algorithms, "XPRESS"
and "LZX", instead of "fast" and "maximum", respectively.

.TP
\fB--ref\fR="\fIGLOB\fR"
File glob of additional split WIM parts that are part of the split WIM being
exported.  See \fBSPLIT_WIMS\fR.

.SH SPLIT WIMS

You may use \fBimagex export\fR to export images from a split WIM.  The
\fISRC_WIMFILE\fR argument is used to specify the first part of the split WIM, and
the \fB--refs\fR="\fIGLOB\fR" option is used to provide a shell-style file glob
that specifies the additional parts of the split WIM.  \fIGLOB\fR is expected to
be a single string on the command line, so \fIGLOB\fR must be quoted so that it
is protected against shell expansion.  \fIGLOB\fR must expand to all parts of
the split WIM, except optionally the first part which may either omitted or
included in the glob (but the first part MUST be specified as \fISRC_WIMFILE\fR as
well).

Here's an example.  The names for the split WIMs usually go something like:
	
.RS
.PP
.nf
mywim.swm
mywim2.swm
mywim3.swm
mywim4.swm
mywim5.swm
.RE

To export the first image of this split WIM to a new or existing WIM file
"other.wim", run:
.PP
.RS
imagex export mywim.swm 1 other.wim --ref="mywim*.swm"
.RE
.PP

.SH EXAMPLES
Export the second image of 'boot.wim' to the new WIM file 'new.wim', and
change the compression type to maximum, if it wasn't maximum already:
.RS
.PP
image export boot.wim 2 new.wim --compress=maximum
.RE
.PP

.SH SEE ALSO
.BR imagex (1)

