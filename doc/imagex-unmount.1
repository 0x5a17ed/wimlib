.TH IMAGEX "1" "May 2012" "imagex (wimlib) wimlib 0.6.3" "User Commands"
.SH NAME
imagex unmount \- Unmount a WIM archive

.SH SYNOPSIS
\fBimagex unmount\fR \fIDIRECTORY\fR [--commit] [--check]

.SH DESCRIPTION
.PP

\fBimagex unmount\fR unmounts the WIM image that has been mounted on
\fIDIRECTORY\fR.

By default, \fBno changes are saved\fR.  You must specify the \fB--commit\fR
option to save your changes to the WIM file.

.SH IMPLEMENTATION

\fBimagex unmount\fR uses WIMLIB's wimlib_unmount() function.  This function is
implemented by using \fBexeclp\fR (3) to execute \fBfusermount -u\fR.  This is
currently necessary because \fBfusermount\fR is installed with the setuid root
permission needed to perform an unmount.  Then, for mounts that are not
read-only, the instance of \fBimagex\fR that is managing the filesystem opens
and waits for a message in a POSIX message queue (see \fBmq_overview\fR (7)).
The instance of \fBimagex\fR that is executing the \fBunmount\fR command then
sends a message that indicates whether changes are to be committed or not, and
whether an integrity table is to be included or not.  A message is then sent in
the other direction when the unmounting has been completed, and it indicates
whether the unmounting was successful or not.

.SH OPTIONS
.TP 6
\fB--commit\fR
Recreate the WIM file with the changes that have been made.  Has no effect if
the mount is read-only.\fR.
.TP 6
\fB--check\fR
When writing \fIWIMFILE\fR, include an integrity table.  Has no effect if the
mount is read-only or if --commit was not specified.
.SH SEE ALSO
.BR imagex (1)

